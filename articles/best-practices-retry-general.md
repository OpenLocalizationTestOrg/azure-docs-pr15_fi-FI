<properties
   pageTitle="Yritä yleisohjeita | Microsoft Azure"
   description="Ohjeita uudelleen lyhytkestoisia vika käsittelyä varten."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="retry-general-guidance"></a>Yritä yleisohjeita

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="overview"></a>Yleiskatsaus

Kaikki sovellukset, jotka yhteydenpito remote palvelut ja resurssit on oltava luottamuksellisia lyhytkestoisia virheitä. Tämä on erityisen pilvipalvelussa, jossa ympäristön ja yhteyden Internetin välityksellä tarkoittaa seuraavanlaisiin virheitä on todennäköisesti usein suoritettavien sovellusten kirjainkokoa. Lyhytkestoisia virheitä esimerkiksi hetkellisen menettämistä verkkoyhteys osat ja -palvelut, palvelun tai aikakatkaisu, kun palvelu on varattu syntyä tilapäinen ei ole käytettävissä. Nämä virheet ovat usein itse korjaaminen, ja jos toiminto toistetaan sopivan viiveen jälkeen se on todennäköisesti onnistuu.

Tässä asiakirjassa kerrotaan yleisohjeita lyhytkestoisia vika käsittelyä varten. Lisätietoja käsitteleminen lyhytkestoisia virheitä, kun Microsoft Azure-palveluiden avulla on artikkelissa [Azure palvelukohtaisia uudelleen ohjeita](best-practices-retry-service-specific.md).

## <a name="why-do-transient-faults-occur-in-the-cloud"></a>Miksi pilveen lyhytkestoisia virheet johtuvat?

Lyhytkestoisia virheitä saattaa ilmetä missä tahansa ympäristössä ympäristö- tai käyttöjärjestelmä ja mitä tahansa sovelluksen. Ratkaisujen Suorita paikallisena paikallisen infrastruktuuri, suorituskykyä ja sovelluksen ja sen osat saatavuus on yleensä kautta ylläpidettyjen kallista ja valitse – usein laitteen redundancy, että osien ja resurssit ovat sijaitsevat lähellä kunkin toiseen. Kun näin epäonnistui epätodennäköistä, voit edelleen johtaa lyhytkestoisia virheet - ja jopa käyttökatkosta odottamattomien tapahtumia, kuten ulkoisen power toimituksen tai verkko-tietojen muissa tilanteissa kautta.

Cloud isännöinnin, mukaan lukien yksityinen cloud järjestelmien tarjota suurempi yleinen käytettävyys käyttämällä jaettuja resursseja, redundancy, automaattinen automaattisesti ja dynaaminen resurssivaraukset on erittäin suuri määrä tärkeämpää Laske solmujen välillä. Näissä ympäristöissä laatu voi kuitenkin tarkoittaa lyhytkestoisia virheitä on todennäköisesti suoritetaan. On useita syitä:

* Cloud-ympäristössä paljon resursseja on jaettu ja näiden resurssien käytön peritään rajoittimen suojaamiseksi resurssi. Joidenkin palvelujen hylkää yhteydet, kun kuormituksen nousee tietylle tasolle tai suurin siirtonopeuden saavutetaan, jotta aiemmin pyyntöjen käsittelyn ja suorituskyky-palvelun kaikille käyttäjille. Rajoittaminen auttaa pitämään muiden tekijöiden ja muiden omistajien avulla jaettuun resurssiin palvelun laatua.
* Cloud-ympäristössä on suunniteltu suuria luvuilla tärkeämpää laitteiston yksiköiden. Ne suorituskyky olisi jakamalla kuormituksen dynaamisesti eri tietojenkäsittely yksiköt ja infrastruktuurin osien välillä ja toimita luotettavuutta kierrättäminen tai korvaamalla epäonnistui yksiköt automaattisesti. Tämä dynamic laatu tarkoittaa, että lyhytkestoisia virheitä ja tilapäinen yhteys virheitä saattaa ilmetä toisinaan.
* Lisää laitteistosta, mukaan lukien verkkoinfrastruktuuria, kuten reitittimen ja kuormituksen tasoitusmääritykset-sovellus ja resurssit ja se käyttää palveluita välillä ovat usein. Tämä lisäinfrastruktuuri voi toisinaan Esittele muita yhteyden viiveen ja lyhytkestoisia yhteyden virheitä.
* Verkkoehdot asiakkaan ja palvelimen välillä voi olla muuttuja, erityisesti silloin, kun viestintä ylittää Internetissä. Vaikka paikallisen sijainnit-hyvin kuormitettu Lataa voi hidastaa viestintä ja aiheuttaa katkonainen epäonnistuneita.

## <a name="challenges"></a>Haasteita
Lyhytkestoisia virheet voi olla erittäin suuri vaikutus havaittu käytettävyyttä sovelluksen, vaikka se testattu huolellisesti ennakoitavissa olosuhteissa. Voit varmistaa, että cloud isännöimä sovellukset toimivat luotettavasti, ne on oltava voi vastata seuraavat haasteet:

* Sovellus on voitava muodostaa havaita virheitä ilmenee ja tarkistaa, onko näitä virheitä on todennäköisesti lyhytkestoisia, Lisää kestävä tai on pääte virheet. Eri resursseja on todennäköisesti palauttaa eri vastauksia, virhe ilmenee, kun nämä vastaukset myös voivat vaihdella toiminnon; tilanteen mukaan esimerkiksi virheen luettaessa säilöstä vastaus voi olla eri kuin vastaus virhe tallennustilan kirjoitettaessa. Useita resursseja ja palveluja on hyvin kuvata lyhytkestoisia virheen sopimuksia. Jos kyseistä tietoa ei ole käytettävissä, se voidaan kuitenkin vaikeasti havaittavissa vian ja onko se on todennäköisesti lyhytkestoisia.
* Sovellus on voitava muodostaa uudelleen, jos se havaitsee vian on todennäköisesti lyhytkestoisia ja seurantaan, kuinka monta kertaa toiminto on uudelleen.
* Sovellus on käytettävä soveltuva strategia uudelleenyritykset. Tämä menetelmä määrittää, kuinka monta kertaa, se tulee uudelleen, jokaisen yrityksen sekä toiminnot tulevat epäonnistuneen yrityksen jälkeen viive. Yritykset ja jokaisessa viive haluamasi määrä on usein vaikea määrittää ja määräytyvät resurssin lajin sekä nykyisen liiketoiminnan edellytyksiä resurssi ja sovelluksesta.

## <a name="general-guidelines"></a>Yleisiä ohjeita
Seuraavien ohjeiden avulla voit suunnitella sopivan lyhytkestoisia vika luovuttamista järjestelmä sovellusten:

* **Määrittää, onko järjestelmä valmiin uudelleen:**
  * Monia palveluita on SDK tai asiakkaan kirjasto, joka sisältää lyhytkestoisia virheen käsittely järjestelmä. Yritä käytännön tiedostossa käytetään yleensä taulukkoihin laatu ja vaatimusten kohde-palvelun. Voit myös muiden palvelujen liittymät voi palauttaa tietoja, jotka on hyödyllinen määritettäessä, onko yritä oikea ja kuinka kauan odottaa ennen seuraavan yritä uudelleen.
  * Käyttää valmiita uudelleen järjestelmä, jos sellainen on käytettävissä ellei sinulla ole tietyn ja hyvin ymmärretty vaatimukset, joka tarkoittaa eri uudelleen toiminnan olisivat tarkoituksenmukaisempia.
* **Jos toimintoa ei sovellu yritetään määrittäminen**:
  * Toimintojen olisi uudelleen vain, jos virheet eivät lyhytkestoisia (yleensä merkitty virheen tyypin), ja jos on vähintään joitakin todennäköisyys, että toiminto onnistuu, kun reattempted. Ei-toimintoja, jotka ilmaisevat Virheellinen toiminto, kuten tietokannan uudelleenyritysvälin kohteessa, joka ei ole, päivitys tai palveluun tai resurssi, joka on tapahtunut vakava virhe
  * Yleensä olisi Toteuta uudelleenyritykset vain kohtaa, johon koko vaikutus määritettävissä ja ehdot ovat hyvin ymmärretty, ja se voi vahvistaa. Jos et, jätä se toteuttamisesta uudelleenyritykset puheluja koodi. Muista, että resurssien palauttamat virheet ja palvelujen ohjausobjektin saattaa kehityttävä ajan kuluessa ja haluat palata tähän määritykseen lyhytkestoisia vika tunnistus-logiikkaa.
  * Kun luot palveluita tai osia, harkitse virhekoodit ja viestejä, joka auttaa asiakkaita selvittää, onko ne olisi uudelleen epäonnistuneita toimintoja. Osoittavat erityisesti jos asiakkaan tulee uudelleen (esimerkiksi palauttamalla **isTransient** -arvo) ja Ehdota sopivan viive seuraava yritä uudelleen. Jos luot verkkopalvelun, harkitse mukautetun määritetyssä palvelun sopimuksia virheitä, joka palauttaa. Vaikka yleinen asiakkaat eivät välttämättä pysty lukemaan nämä, ne on kuitenkin hyötyä mukautetun asiakkaiden luotaessa.
* **Määritä haluamasi uudelleen Laske- ja väli:**
  * On tärkeää optimointi uudelleen Laske- ja Käyttötapaus tietotyyppiä aikaväli. Jos ei uudelleen riittävän monta kertaa, sovellus ole toimintoa ei voi suorittaa ja todennäköisesti ilmenee virhe. Jos liian monta kertaa uudelleen tai kanssa liian lyhyt välisen ajan yrittää, sovelluksen mahdollisesti mahtuu resurssit, kuten viestiketjuissa siirtyminen, yhteydet ja muistin pitkäksi, mikä hidastaa sovelluksen kunto.
  * Aikaväli ja uudelleenyritykset määrän todellisilla määräytyvät sen mukaan, yritetään toiminto. Esimerkiksi toiminnon kuuluu käyttäjän toimia, jos välin on oltava lyhyt ja yritti vastausta käyttäjät haluat välttää vain muutaman uudelleenyritykset (joka sisältää Avaa yhteydet ja pienentää käytettävyys muille käyttäjille). Jos toiminto on osa pitkään käynnissä tai kriittinen työnkulkua, jossa peruuttamisesta ja käynnistämällä sen uudelleen prosessi on kallista tai aikaa, on odotettava enää yritykset ja yritä uudelleen useita kertoja.
  * Määrittämiseen tarvittavat välit uudelleenyritykset on eniten vaikeaa osa onnistuneen strategia suunnitteleminen. Tyypillinen strategioita Käytä väli seuraavanlaisia:
      * **Eksponentti Edellinen käytöstä**. Sovelluksen odottaa hetken, ennen kuin ensimmäinen uudelleen ja lisääntyvien kellonaikojen välinen kunkin myöhemmin uudelleen eksponenttimuodossa. Se esimerkiksi 3 sekuntia 12 sekuntia 30 sekunnin jälkeen uudelleen ja niin edelleen.
      * **Vaiheittainen väliajoin**. Sovelluksen odottaa hetken, ennen kuin ensimmäinen uudelleen ja valitse kasvava kellonaikojen välinen kunkin myöhemmin uudelleen. Se esimerkiksi 3 sekuntia 7 sekunnin 13 sekunnin jälkeen uudelleen ja niin edelleen.
      * **Säännöllisin väliajoin**. Sovelluksen odottaa saman ajan kuluessa välinen. Esimerkiksi se yrittää toiminnon 3 sekunnin välein.
      * **Välitön uudelleen**. Joskus lyhytkestoisia virhe aiheutuu erittäin lyhyt, esimerkiksi tapahtuman, kuten verkko-paketin ristiriitoja tai laitteisto-osan Piikkiin. Tässä tapauksessa toiminnon uudelleen heti sopii koska se välttämättä onnistu, jos vika on poistanut ja Seuraava-Lähetyspyyntö sovelluksen kuluvaa aikaa. Pidä koskaan olla useampi kuin yksi heti uudelleen yritys, ja sinun kannattaa siirtyä vaihtoehtoinen strategioita, kuten eksponentiaalisen Edellinen- tai poistaminen käytöstä varakyselyjen toiminnot, kuten Jos heti uudelleen epäonnistuu.
      * **Satunnaisen**. Jonkin yllä olevassa luettelossa strategioita uudelleen voi sisältää satunnaisen, jotta asiakkaan lähettäminen myöhemmin uudelleenyritykset samanaikaisesti useita kertoja. Esimerkiksi yhden esiintymän saattaa uudelleen 3 sekuntia, 11 sekunnin, 28 sekuntia ja niin edelleen samalla, kun toinen yrittää 4 sekunnin 12 sekuntia, 26 sekunnin kuluttua toiminnon jälkeen ja niin edelleen. Satunnaisen on hyötyä tekniikkaa, joka voidaan yhdistää muihin.  
  * Yleiset ohjeena käyttää eksponentiaalisen Edellinen käytöstä-strategia taustan toiminnot ja heti tai säännöllisesti aikavälin uudelleen strategioita vuorovaikutteisia toimintoja. Kummassakin tapauksessa sinun on valittava viive ja Laske uudelleen niin, että kaikki suurin viive uudelleen yritykset on pakollinen lopusta loppuun-viive taso.
  * Ottaa huomioon kaikki tekijät, jotka vaikuttavat enimmillään aikakatkaisu yritetään uudelleen toiminnolle yhdistelmä. Näitä tekijöitä ovat uudelleenyritykset ja uudelleenyritykset enimmäismäärä viive sekä aika, epäonnistunut yhteyden tuottamaan vastausta (yleensä määritetty asiakkaan aikakatkaisuarvon mukaan). Nämä ajat yhteensä voi johtaa hyvin suuriin yleinen toiminto aikojen, erityisesti jos käyttämällä eksponentiaalisen viive strategia missä välin uudelleenyrityksiä kasvaa nopeasti kunkin virheen jälkeen. Jos prosessi on täytettävä tietyn palvelun: sopimuksen tason (SLA), yleinen käyttöaika, mukaan lukien kaikki aikakatkaisu ja viiveitä kyseisessä määritettävä SLA
  * Over-aggressive uudelleen strategioita, joka on liian lyhyt aikavälit tai liian yrittää voi suorittaa uudelleen, voi olla haitallinen vaikutus kohde resurssiin tai palveluun. Tämä saattavat estää resurssi tai palvelun siitä ylikuormitettu tilaan ja estää tai hylkää pyynnöt säilyvät. Tämä tulokset enemmän pyynnöt vastaanotettavien resurssi tai palveluun ja näin ollen palauttaa mahdollisuus vicious ympyrässä edelleen pienenee.
  * Huomioon toimintojen aikakatkaisu valittaessa uudelleen välit tapahtuvien avaamista myöhemmin yrityksellä heti (Jos esimerkiksi aikakatkaisuajan muistuttaa väli). Harkitse myös sinun tarvitse säilyttää yhteensä mahdollista ajanjakson (aikakatkaisun plus uudelleen välit) tietyn kokonaisaika alapuolella. Toiminnot, jotka on kuluisi lyhyet tai pitkät aikakatkaisu voi vaikuttaa kuinka kauan Odota ja kuinka usein uudelleen.
  * Käytä poikkeus ja sen sisältämät tiedot tai virhekoodit ja -viestit palauttama palvelun optimoi aikaväli ja uudelleenyritykset määrä. Esimerkiksi joidenkin poikkeukset tai virhe koodit (kuten HTTP koodi HTTP 503 – palvelu ei ole käytettävissä, ja yritä jälkeen ylätunnisteen vastauksessa) voivat olla merkkinä siitä kuinka kauan virhe saattaa viimeksi, tai että palvelu on epäonnistunut ja ei vastaa mitään myöhemmin yritys.
* **Vältä Anti kuvioita**:
  * Suurin osa tapaukset Vältä käyttöotot, jotka sisältävät kaksoiskappaleet kerroksia, yritä koodi. Vältä rakenteet, jotka sisältävät CSS uudelleen-järjestelmiä tai, Toteuta yritä toimintoa, joka liittyy pyynnöt hierarkian jokaisessa vaiheessa, ellei sinulla ole erityiset vaatimukset, jotka vaativat tämä. Käytä näitä poikkeustapauksissa käytäntöjä, jotka estävät liiallinen uudelleenyritykset ja viive kausien määrä ja varmista, että tiedät, vaikutukset. Esimerkiksi jos yksi osa tekee pyyntö toiseen, mitä kohde-palvelu, ja ota käyttöön kolme sekä puheluja ole laskeminen ja yritä sitten sisäänkäyntien yhdeksän uudelleen yrittää yhteensä vastaan. Monta palvelut ja resurssit toteuttaa valmiin uudelleen järjestelmä ja pitäisi tutkia, voit poistaa käytöstä tai muuttaa tarvittaessa toteuttamisesta uudelleenyritykset ylemmälle tasolle-palvelussa.
  *  Älä koskaan Toteuta päättömät uudelleen järjestelmä. Tämä on todennäköisesti estää resurssi tai palvelun liikaa tilanteisiin palauttaminen ja aiheuttaa rajoittimen ja hylätty Jatka pidemmän yhteydet. Rajallinen luvun tai uudelleenyritykset tai toteuta kuviota, kuten [katkaisin](http://msdn.microsoft.com/library/dn589784.aspx) sallimaan palvelu palauttaa.
  * Suorita koskaan heti uudelleen useita kertoja.
  * Vältä säännöllisesti uudelleen väli, erityisesti silloin, kun sinulla on runsaasti uudelleenyritykset, käytettäessä palvelut ja resurssit Azure-tietokannassa. Parhaan mahdollisen vaihtoehto on Tämä skenaario on Eksponentiaalinen Edellinen käytöstä strategia piiri uusinta-ominaisuuksien kanssa.
  * Estä useita kertoja samaan asiakkaaseen tai useita kertoja eri asiakkaiden, lähettämästä uudelleenyritykset samaan aikaan. Jos kyseessä on todennäköistä, esitellä lähdeportin jaksoihin uudelleen.
* **Yritä strategia ja käyttöönoton testaaminen:**
  * Varmistaa täysin testaat uudelleen strategia käyttöönoton kohdassa joukkona leveä tilanteissa mahdollisimman, erityisesti silloin, kun sekä sovellus ja kohde resursseja tai palvelujen se käyttää on erittäin kuormitus. Voit tarkistaa toiminta testauksen aikana, seuraavasti:
      * Lisää lyhytkestoisia ja lyhytaikainen virheitä palveluun. Esimerkiksi lähettää virheellisiä pyyntöjä tai lisätä koodia, joka tunnistaa testi pyynnöt ja vastaa eri Virhetyyppien. Esimerkki TestApi, on artikkelissa [Vika lisäämisen testaaminen oikeilla TestApi](http://msdn.microsoft.com/magazine/ff898404.aspx) ja [Johdanto TestApi – osa 5: hallitun koodin vika lisäämisen API](http://blogs.msdn.com/b/ivo_manolov/archive/2009/11/25/9928447.aspx).
      * Luo mock, resurssin tai palvelu, joka palauttaa alueen virheistä, jotka reaali palvelun voi palauttaa. Varmistaa tärkeimmät virhe tyypit, yritä strategia on suunniteltu havaitsemaan.
      * Pakota lyhytkestoisia virheitä poistamalla tilapäisesti käytöstä tai ylikuormituksen palvelu, jos se on mukautettu-palvelu, jotka olet luonut ja ottanut käyttöön (sinun ei, yrittää ylikuormittamaan jaettuja resursseja tai jaettu Azure palveluja).
      * HTTP-pohjaista API, kannattaa käyttää Automaattinen testien FiddlerCore kirjastossa voit muuttaa HTTP-pyyntöjen ulkoasusta ylimääräisiä meno-paluu kertaa lisäämällä tai muuttamalla vastauksen (kuten HTTP-tilakoodin, ylä- ja leipätekstin tai muut tekijät). Näin deterministic testaus alijoukkoa virheen ehdot, onko lyhytkestoisia virheitä tai muun tyyppisiä virhe. Lisätietoja on artikkelissa [FiddlerCore](http://www.telerik.com/fiddler/fiddlercore). Esimerkkejä käyttämisestä kirjaston erityisen **HttpMangler** -luokan tutkia [Azure-tallennustilan SDK-lähdekoodi](https://github.com/Azure/azure-storage-net/tree/master/Test).
      * Suuren kuormituksen aikana Kerroin ja että strategia toimii oikein näitä ehtoja ja yritä järjestelmä eikä asiakkaan toiminnan haitallinen vaikutus tai aiheuttaa pyyntöjen välillä pääse tapahtumaan samanaikainen testien suorittaminen
* **Hallitse uudelleen käytännön määritykset:**
  * _Yritä käytäntö_ on yhdistelmä uudelleen strategia osissa. Se määrittää, joka määrittää, onko virheen todennäköisesti lyhytkestoisia, tunnistus järjestelmä käyttää (kuten tavallinen, eksponentiaalisen takaisin vapaa- ja lähdeportin), todellinen väli-arvo (t) ja kuinka monta kertaa yrittää aikavälin tyyppi.
  * Uudelleenyritykset on pantava täytäntöön monessa jopa helpoin-sovelluksen ja monimutkaisia sovellusten jokaisella tasolla. Sen sijaan, että Kova-koodaus kunkin käytännön paikoissa, jossa on useita osia, kannattaa käyttää keskipisteestä kaikki käytännöt tallentamista varten. Esimerkiksi tallentaa arvoja, kuten välin sovelluksen Laske uudelleen, lukea niitä suorituksen aikana ja luoda ohjelmallisesti uudelleen käytännöt. Tämä on helppo asetusten hallinta ja muokata ja hienosäätää arvot, jotta voit vastata vaatimukset ja skenaarioiden muuttaminen. Tallentaa arvot sen sijaan rereading määrityksen tiedoston aina ja varmistaa sopivan oletusasetusten järjestelmän rakenteen käytetään kuitenkin, jos arvoja ei voi hakea määritys.
  * Valitse Azure Cloud Services-sovelluksessa harkitse tallentamista arvot, joiden avulla voit luoda uudelleen käytännöt suorituksen palvelun määritystiedostossa niin, että voit muuttaa tarvitsematta Käynnistä sovellus uudelleen.
  * Voit hyödyntää sisäinen tai määrittää uudelleen strategioita käytettävissä käytät, mutta ainoastaan, jos ne eivät sovellu käyttämässäsi skenaariossa API-asiakasohjelmassa. Nämä strategiat ovat yleensä yleinen. Joissakin tilanteissa ne voivat olla kaikki, jotka tarvitaan, mutta muissa tilanteissa ne eivät välttämättä tarjoa monia asetukset tiettyä tarpeitasi. On hyvä tietää, miten asetukset vaikuttavat sovelluksen kautta testaaminen sopivimman arvot.
* **Kirjaudu sisään ja seurata lyhytkestoisia ja lyhytaikainen virheitä:**
  * Osana uudelleen strategia Sisällytä poikkeusten sekä muita instrumentation, kun uudelleenyritykset tehdään kirjautuu. Vaikka ajoittaiset lyhytkestoisia virhe ja yritä uudelleen ovat oikein, ja osoita uudelleenyritykset ongelma, Normaali ja kasvava numerot ovat usein ongelman, joka aiheuttaa virheen tai on tällä hetkellä vaikuttavat sovelluksen suorituskykyä ja käytettävyyden ilmaisin.
  * Kirjaudu lyhytkestoisia virheitä varoitus tapahtumat virhe tapahtumat sijaan niin, että seurantaa järjestelmät tunnista niitä sovelluksen virheinä, jotka voivat hälytyksiä EPÄTOSI.
  * Harkitse tallentamista arvon oman lokimerkintöjä, joka ilmaisee, jos uudelleenyritykset on syynä rajoitin-palvelussa, tai muun tyyppisiä virheitä epäonnistuneita, kuten niin, että voit erottaa ne tiedoista analyysin aikana. Rajoittava virheiden määrä kasvaa on usein rakenne tavassa sovelluksen tai sinun on vaihdettava premium-palvelu, joka on erillinen laitteiston ilmaisin.  
  * Harkitse mittaaminen ja kirjaamisen toiminnot, jotka sisältävät uudelleen järjestelmä Yleinen aika. Tämä on hyvä ilmaisin lyhytkestoisia virheitä yleinen tehosteen käyttäjän vastausajat, prosessin viive ja sovelluksen käyttöä tapauksissa tehokkuutta. Myös log uudelleenyritykset numero on tapahtunut sen tietoja, jotka on lähettänyt vastausajan tekijät.
  * Harkitse toteuttaminen telemetriatietojen ja valvonta järjestelmän, voit toteuttaa ilmoitukset, kun numero ja virheiden suuruuden, uudelleenyritykset määrän keskiarvo tai otettava toiminnot onnistuvat, yleinen ajat lisääntyvien.
* **Hallita toimintoja, jotka eivät läpäise jatkuvasti seuraavasti:**
  * Ole tilanteet, joissa toimintoa jatketaan epäonnistuu, jokaisen yrityksen ja on tärkeä ottaa huomioon, miten käsittelee tilanne:
      * Yritä strategia määrittää kuinka monta kertaa, toiminto on yritettävä, vaikka se ei estä sovelluksen toistuvan toiminto uudelleen, jossa uudelleenyritykset sama määrä. Esimerkiksi jos tilauksen käsittelyn palvelun epäonnistuu vakava virhe, joka siirtää sen toiminnon pois pysyvästi, yritä strategia voi tunnistaa yhteyden aikakatkaisu ja pitävät lyhytkestoisia vika. Koodin uudelleen tietyn määrän kertoja ja anna sitten. Kun toinen asiakas tekee tilauksen, toiminto yritetään uudelleen - vaikka se ei voi epäonnistua aina että.
      * Jos haluat estää jatkuvan uudelleenyritykset toiminnot, jotka jatkuvasti epäonnistuu, harkita [katkaisin kuvio](http://msdn.microsoft.com/library/dn589784.aspx). Tätä mallia, jos suorittaa loppuun määritetyn ajanjakson epäonnistuneiden yritysten määrä on suurempi kuin kynnysarvo, pyynnöt palautetaan soittajalle heti virheinä, ilman yrittää käyttää epäonnistui resurssiin tai palveluun.
      * Sovelluksen säännöllisesti testata palvelun katkonainen perusteella ja pitkissä välit pyyntöihin havaitsemaan, kun se on käytettävissä. Sopivan ajan riippuu skenaariota, kuten toiminnon kriittisyyden ja laatu-palvelun ja voi olla mikä tahansa muutama minuutti ja useita tunteja välillä. Kohtaan, jossa testi onnistuu sovellus voi jatka työskentelyä tavalliseen ja välittää pyynnöt juuri palautetun palvelun.
      * -Voi olla mahdollista kuuluu takaisin esiintymässä palvelu (esimerkiksi eri palvelinkeskuksen tai sovelluksen), kun käytät samalla palvelu, joka on yhteensopiva (esimerkiksi yksinkertaisempi) toimintoja tai suorittaa joitakin vaihtoehtoinen toimet Toivottavasti, pääset, että palvelu ole käytettävissä pian. Esimerkiksi kannattaa ehkä tallentaa pyynnöt palvelun jonossa tai tallentaa ja kuunnella niitä myöhemmin. Muutoin voi aina käyttäjän ohjaaminen sovelluksen vaihtoehtoinen esiintymää, heikentää sovelluksen suorituskykyä, mutta silti tarjota hyväksyttävä toimintoja tai vain Palaa viestiin, joka ilmaisee käyttäjän sovellus ei ole käytettävissä osoitteessa näyttäminen.

* **Muita huomioon otettavia seikkoja**
  * Uudelleenyritykset määrän arvoja ja yritä välit käytännön valitsemisessa huomioon Jos pitkään käynnissä olevien tai Monivaiheinen toiminto toiminnon palvelun tai resurssi kuuluu. Voi olla vaikeaa tai kallista korvaamaan kaikki muut toiminnallisia vaiheet, jotka on jo onnistui, kun yksi epäonnistuu. Tässä tapauksessa todella pitkä aikaväli ja uudelleenyritykset suuri määrä voi olla hyväksyttävä, kunhan se ei estä muita toimintoja tilalla tai lukitseminen niukkojen resursseja.
  * Mieti, jos saman toiminnon yritetään voi aiheuttaa epäyhtenäisyydet tiedot. Jos joitakin osia monivaiheinen prosessi toistuvat ja toiminnot eivät ole idempotent, se voi johtaa ristiriidassa. Esimerkiksi toiminnon, jota kasvattaa arvoa, jos toistuva, tuottaa virheellisen tuloksen. Toiminto, joka lähettää viestin jonon toistuva saattaa aiheuttaa ristiriidassa viestin kuluttaja jos se ei havaitse viesteistä. Voit estää tämän varmistaa suunnitellun jokaisen vaiheen kuin idempotent-toimintoa. Saat lisätietoja ainutkertaisuus [Ainutkertaisuus kuviot](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/).
  * Harkitse toiminnoista, joita yritetään aluetta. Esimerkiksi voi olla helpompi toteuttaa tasolle, joka kattaa varallisuuden koodi uudelleen ja yritä ne kaikki, jos jokin epäonnistuu. Kuitenkin tekoa voi johtaa ainutkertaisuus ongelmasta tai tarpeettomat palauttaminen toimintoja.
  * Jos valitset yritä alueen, joka kattaa useita toimintoja, otettava huomioon kaikki ne määritettäessä uudelleen välein, kun seuranta aika ja ennen nostaminen toistunut ilmoitusten yhteensä viive.
  * Mieti, yritä strategia saattaa vaikutus muiden tekijöiden ja muiden omistajien jaetun sovelluksen tai käytettäessä jaettuja resursseja ja palveluja. Kohdetoimialueen uudelleen käytäntöjä voi aiheuttaa lyhytkestoisia virheitä ilmenee muille käyttäjille ja sovelluksia, jotka Jaa resurssit ja palvelut kasvava määrä. Vastaavasti sovelluksesi voi vaikuttaa resurssien ja palvelujen muiden käyttäjien käyttöön uudelleen käytännöt. Kriittisten sovellusten saatat haluta käyttää premium-palvelut, joita ei jaeta. Tämän avulla voit määrittää paljon tarkemmin kuormituksen ja seurauksena rajoittimen näiden resurssien ja palveluista, jotka auttavat perustella lisäkustannuksia.

## <a name="more-information"></a>Lisätietoja

* [Azure palvelukohtaisia uudelleen ohjeet](best-practices-retry-service-specific.md)
* [Lyhytkestoisia virheen käsittely-sovelluksen estäminen](http://msdn.microsoft.com/library/hh680934.aspx)
* [Katkaisin kuvio](http://msdn.microsoft.com/library/dn589784.aspx)
* [Jalostettujen tapahtuman kuvio](http://msdn.microsoft.com/library/dn589804.aspx)
* [Ainutkertaisuus kuviot](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/)
